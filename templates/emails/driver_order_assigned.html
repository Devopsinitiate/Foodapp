{% extends "emails/base_email.html" %}

{% block content %}
<h2 style="color: #F97316;">ğŸ”” New Delivery Assignment!</h2>

<p>Hi {{ delivery.driver.first_name|default:delivery.driver.username }},</p>

<p>You have been assigned a new delivery! Please review the details below and head to the restaurant when you're ready.
</p>

<div style="background-color: #f9f9f9; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h3 style="margin-top: 0; color: #F97316;">Delivery #{{ delivery.id }}</h3>
    <p><strong>Order:</strong> #{{ delivery.order.order_number }}</p>

    <div style="background-color: #fef3c7; padding: 15px; border-radius: 6px; margin: 15px 0;">
        <h4 style="margin-top: 0; color: #92400e;">ğŸ“ Pickup Location</h4>
        <p style="margin: 5px 0;"><strong>{{ delivery.order.restaurant.name }}</strong></p>
        <p style="margin: 5px 0;">{{ delivery.order.restaurant.address }}</p>
        {% if delivery.order.restaurant.phone_number %}
        <p style="margin: 5px 0;">ğŸ“ {{ delivery.order.restaurant.phone_number }}</p>
        {% endif %}
    </div>

    <div style="background-color: #e0f2fe; padding: 15px; border-radius: 6px; margin: 15px 0;">
        <h4 style="margin-top: 0; color: #075985;">ğŸ“ Delivery Location</h4>
        <p style="margin: 5px 0;"><strong>{{ delivery.order.user.get_full_name }}</strong></p>
        <p style="margin: 5px 0;">{{ delivery.order.delivery_address }}</p>
        <p style="margin: 5px 0;">{{ delivery.order.delivery_city }}, {{ delivery.order.delivery_state }}</p>
        <p style="margin: 5px 0;">ğŸ“ {{ delivery.order.contact_phone }}</p>
    </div>

    <p><strong>Order Total:</strong> ${{ delivery.order.total }}</p>
    <p><strong>Payment:</strong>
        {% if delivery.order.payment_status == 'paid' %}
        ğŸ’³ Already Paid (no collection needed)
        {% elif delivery.order.payment_status == 'cod' %}
        ğŸ’µ <strong style="color: #dc2626;">Collect ${{ delivery.order.total }} cash on delivery</strong>
        {% endif %}
    </p>

    <p><strong>Delivery Fee:</strong> ${{ delivery.delivery_fee }}</p>
</div>

<div style="background-color: #dcfce7; padding: 15px; border-radius: 6px; margin: 20px 0;">
    <p style="margin: 0; color: #16a34a;">
        ğŸ“ <strong>Special Instructions:</strong><br>
        {{ delivery.order.delivery_instructions|default:"No special instructions" }}
    </p>
</div>

<p style="text-align: center; margin-top: 30px;">
    <a href="{{ site_url }}/delivery/dashboard/" class="button">Open Driver Dashboard</a>
</p>

<p style="margin-top: 20px; color: #666; text-align: center;">
    Please accept this delivery in your dashboard and update the status as you progress.
</p>
{% endblock %}